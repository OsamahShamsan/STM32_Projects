// === menu.c ===
#include "menu.h"
#include "flash_storage.h"
#include "eeprom_emul.h"
#include "uart_dma.h"

#define TOTAL_MENU_LINES 6

static char* menu_lines[TOTAL_MENU_LINES];

void Menu_Init(void) {
    flash_storage_read_menu(&menu_lines[0]);      // First 3 lines from flash
    eeprom_emul_read_menu(&menu_lines[3]);        // Next 3 lines from EEPROM
}

void Menu_Display(void) {
    for (int i = 0; i < TOTAL_MENU_LINES; i++) {
        uart_dma_transmit((uint8_t*)menu_lines[i], strlen(menu_lines[i]));
        uart_dma_transmit((uint8_t*)"\r\n", 2);
    }
}
