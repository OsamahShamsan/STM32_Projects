// vt100.c

#include "vt100.h"
#include "uart_writer.h"
#include <stdio.h>


void vt100_clear_screen(UART_HandleTypeDef *uart_x) {
    //uart_send_async(VT100_CLEAR_SCREEN);

    //uart_send_async(uart_x);
    const char* test = ">> STM32 Boot OK <<\r\n";
    HAL_UART_Transmit(&uart_x, (uint8_t*)test, strlen(test), HAL_MAX_DELAY);
    //uart_send_async(VT100_CURSOR_HOME);
}

void vt100_move_cursor(uint8_t row, uint8_t col) {
    char cmd[16];
    snprintf(cmd, sizeof(cmd), ESC "[%d;%dH", row, col);
    uart_send_async(cmd);
}

void vt100_set_color(const char* attr) {
    if (attr) uart_send_async(attr);
}

void vt100_reset_color(void) {
    uart_send_async(VT100_RESET);
}
