// === uart_dma.c ===
#include "uart_dma.h"
#include "stm32g4xx_hal.h"

extern UART_HandleTypeDef huart2; // assumed UART2 for communication

void uart_dma_transmit(uint8_t* data, uint16_t size) {
    HAL_UART_Transmit_DMA(&huart2, data, size);
    while (HAL_UART_GetState(&huart2) != HAL_UART_STATE_READY) {} // Wait for DMA complete
}
